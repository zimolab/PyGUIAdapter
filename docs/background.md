# 背景

一些开发者可能希望将自己使用python开发的工具提供给其他人使用。为了实现这一目的，通常，开发者会使用python内置的`argparse`标准库或者是诸如`click`、`docopt`这样的第三方工具，为用户创建一个命令行界面（CLI）。不可否认，CLI是一种简单、高效的交互方式，但对于开发者和用户而言，这种交互方式存在着一些难以忽视的弊端————问题的核心在于`成本`。

对于使用者而言，通过CLI与程序进行交互————正确地输入程序所需的参数，获取并理解程序输出的结果————并不是一种自然而然的“本能”，而是一种需要后天习得的“技能”，尤其是对于那些成长于GUI时代，习惯于图形化操作的那些人而言。在图形界面已经普及的当下，普通用户很少会有动力去专门学习如何使用命令行，有些人甚至不清楚如何启动自己系统上的模拟终端————理由显而易见，这样做会引入很多额外的学习成本。

对于开发者而言，他们同样面临着`“成本”`的问题。一方面，开发一个`CLI`程序并不是一件简单的事情，很多时候，即使在`click`、`docopt`这样强大的工具的帮助下，开发出一个逻辑清晰、交互简单的`CLI`程序，都是一件极具挑战的事情。另一方面，当开发者希望自己的程序被尽可能多的人使用，而又无法假定其用户全都是所谓“专业用户”时，那么，从某种程度上讲，他就有了让自己开发的程序尽可能易于使用的“义务”。其中，一个合理的考虑是，向用户提供图像界面版本，这样可以充分降低使用门槛。当然，这样做的后果是把学习成本从用户转移到了开发者，促使开发者学习和掌握至少一种GUI框架。

在python世界中，用于图形用户界面开发的库不在少数。其中包括内置的`Tkinter`,基于`wxWidgets`的`wxPython`，基于`Qt`的`pyqt/pyside`，以及一些基于web技术的库。综合来看，基于`Qt`的python绑定库在界面外观、运行效率、稳定性、功能性等方面有着最佳的平衡。但是，对于很多没有接触过GUI开发的python开发者而言，学习`pyqt/pyside`的成本有些太高了。

矛盾之处在于，很多开发者希望向用户提供图像界面程序，但又不愿意在GUI这种“细枝末节”花费过多的时间和精力，更无意因此成为GUI开发方面的专家。

开发`PyGUIAdapter`就是为了解决这一矛盾，至少是为解决这一矛盾提供一个可能的选项。此前，已经有人在这方面做出过尝试，其成果就是[`Gooey`](https://github.com/chriskiehl/Gooey)。

这是一个了不起的尝试，帮助很多开发者低成本地将其程序从`CLI`迁移到`GUI`。

`Gooey`的核心思路是Hook开发者的`argparses`代码，将开发者定义的参数/选项（argument/option）自动转化为输入控件，这确实是一种巧思妙想，也是`PyGUIAdapter`最初的灵感来源之一，但是在实际体验下来，我发现`Gooey`也存在一些问题，比如：

- 它所生成的界面在Windows上流畅性欠佳，对高分屏的适配也不好（这可能与它基于wxPython有关，或者是我遇到的个例？）
- 内置的控件类型有限，自行扩展也较为困难，界面可自定义的地方较少
- 仍然需要开发者编写`argparse`代码

尤其是最后一点，对于一些开发者而言，是最为难受的。因为很多时候，开发者虽然不想在GUI上耗费精力，但不意味着他们很乐意组织CLI相关的代码，也许，很多开发者所关注的，从始至终只有如何实现核心功能本身这一点。

对此，`PyGUIAdapter`顺着`Gooey`的思路，提出了如下解决方案：

开发者将需要对用户提供的功能封装成函数，将所需的用户输入定义为函数参数，并使用类型标注语法标注其类型，不同的类型将被映射为不同的控件。通过分析函数参数列表等元信息，`PyGUIAdapter`动态生成输入控件和窗口界面，并自动处理用户输入输出，从而最大程度上减少开发者在实现核心功能以外的心智负担。